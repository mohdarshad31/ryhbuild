(this.webpackJsonpResearchYourHealth=this.webpackJsonpResearchYourHealth||[]).push([[22],{1116:function(e,t,a){},1186:function(e,t,a){"use strict";a.r(t);var s=a(39),n=a(40),o=a(71),r=a(70),i=a(69),l=a(0),c=a.n(l),d=a(336),m=a(337),p=a(314),u=a(317),f=a(330),g=a(361),h=a(322),b=a(323),v=a(324),y=a(514),I=a(302),E=a(73),j=(a(305),a(47)),N=a(297),O=(a(341),a(622),a(1116),function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).changeHandler=function(e){var t=e.target.name,a=e.target.value,s=n.state.formField;s[t]=a,n.setState({formField:s})},n.changeEmployeeHandler=function(e){var t=[];e.target.selectedOptions.forEach((function(e){t.push(e.value)})),n.setState({employeeIds:t})},n.changeCategoryHandle=function(e){var t=e.target.name,a=e.target.value,s=n.state.formField;s[t]=a,n.setState({formField:s}),n.getTemplateList(s.categoryId,a)},n.state={subCategoryList:[],loading:!1,categoryList:[],formField:{categoryId:"",subCategoryId:"",inspection_name:"",organizationId:"",employeeId:"",templateId:"",storeId:""},formErrors:{category:"",subcategory:"",organization:"",employee:"",template:"",store:"",inspection_name:"",error:""},organizationList:[],employeeList:[],templateList:[],templateData:[],storeList:[],inspectionId:"",employeeIds:[],formValid:!0,templatePreviewData:[],formProccessing:!1,changeDropDown:!1},n.getEmployeeList=n.getEmployeeList.bind(Object(o.a)(n)),n.getTemplateList=n.getTemplateList.bind(Object(o.a)(n)),n.submitHandler=n.submitHandler.bind(Object(o.a)(n)),n.resetForm=n.resetForm.bind(Object(o.a)(n)),n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params;void 0!==e.inspectionId&&""!==e.inspectionId&&(this.setState({inspectionId:e.inspectionId}),this.getInspectionDetail(e.inspectionId)),this.categoryList(),this.getEmployeeList()}},{key:"getInspectionDetail",value:function(e){var t=this;this.setState({loading:!0},(function(){j.a.getAPIWithAccessToken("inspection/"+e).then((function(e){if(console.log(e),void 0===e.data.data||!e.data.status)return t.setState({loading:!1}),I.b.error(e.data.message),void t.props.history.push("/admin/manage-research");var a=e.data.data,s=t.state.formField;s.categoryId=a.categoryId,s.inspection_name=a.inspectionName,s.employeeId=a.employeeId,s.templateId=a.templateId,t.getTemplateList(a.categoryId,!1),t.setState({loading:!1,formField:s,inspectionId:a.inspectionId,employeeIds:[a.employeeId]})})).catch((function(e){void 0!==e.response&&401===e.response.status?(localStorage.clear(),t.props.history.push("/login")):(t.setState({loading:!1}),I.b.error(e.message))}))}))}},{key:"categoryList",value:function(){var e=this;j.a.getAPIWithAccessToken("template/category").then((function(t){if(console.log(t),void 0===t.data.data||!t.data.status)return e.setState({loading:!1}),void I.b.error(t.data.message);e.setState({categoryList:t.data.data})})).catch((function(t){void 0!==t.response&&401===t.response.status?(localStorage.clear(),e.props.history.push("/login")):I.b.error(t.message)}))}},{key:"getEmployeeList",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=this.state.formField;this.setState({loading:!0},(function(){j.a.getAPIWithAccessToken("profile/list?role=both").then((function(s){if(console.log(s),void 0===s.data.data||!s.data.status)return e.setState({loading:!1}),void I.b.error(s.data.message);t&&(a.employeeId=""),e.setState({employeeList:s.data.data.profileList,formField:a,loading:!1})})).catch((function(t){void 0!==t.response&&401===t.response.status?(localStorage.clear(),e.props.history.push("/login")):(e.setState({loading:!1}),I.b.error(t.message))}))}))}},{key:"getTemplateList",value:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=this.state.formField;if(""===e)return s.templateId="",void this.setState({formField:s,templateList:[]});this.setState({loading:!0},(function(){j.a.getAPIWithAccessToken("template?categoryId="+e).then((function(e){if(console.log(e),void 0===e.data.data||!e.data.status)return t.setState({loading:!1}),void I.b.error(e.data.message);a&&(s.templateId=""),t.setState({templateList:e.data.data,formField:s,loading:!1})})).catch((function(e){void 0!==e.response&&401===e.response.status?(localStorage.clear(),t.props.history.push("/login")):(t.setState({loading:!1}),I.b.error(e.message))}))}))}},{key:"validateForm",value:function(){var e={},t=this.state.formField,a=!0;return void 0!==t.categoryId&&""!==t.categoryId||(e.categoryId="Please setect category",a=!1),void 0!==t.templateId&&""!==t.templateId||(e.templateId="Please setect template",a=!1),void 0!==t.inspection_name&&""!==t.inspection_name||(e.inspection_name="Please enter clinical trials name",a=!1),""===this.state.inspectionId&&0===this.state.employeeIds.length&&(e.employee="Please select employee",a=!1),this.setState({formErrors:e}),a}},{key:"errorClass",value:function(e){return 0===e.length?"":"has-error"}},{key:"submitHandler",value:function(e){var t=this;if(e.preventDefault(),e.target.className+=" was-validated",!this.validateForm())return!1;this.setState({loading:!0},(function(){var e=t.state.formField,a={categoryId:e.categoryId,inspectionName:e.inspection_name,templateId:e.templateId,assignEmployee:t.state.employeeIds};""!==t.state.inspectionId&&(a.employeeId=t.state.employeeIds[0]),""!==t.state.inspectionId?(a.inspectionId=t.state.inspectionId,j.a.putAPIWithAccessToken("inspection",a).then((function(e){if(void 0===e.data.data||!e.data.status)return t.setState({loading:!1}),void I.b.error(e.data.message);t.setState({modal:!1}),I.b.success(e.data.message),t.props.history.push("/admin/manage-inspection/inspection")})).catch((function(e){void 0!==e.response&&401===e.response.status?(localStorage.clear(),t.props.history.push("/login")):t.setState({loading:!1}),I.b.error(e.message)}))):j.a.postAPIWithAccessToken("inspection",a).then((function(e){if(void 0===e.data.data||!e.data.status)return t.setState({loading:!1}),void I.b.error(e.data.message);t.setState({modal:!1}),I.b.success(e.data.message),t.props.history.push("/admin/manage-research/research")})).catch((function(e){void 0!==e.response&&401===e.response.status?(localStorage.clear(),t.props.history.push("/login")):t.setState({loading:!1}),I.b.error(e.message)}))}))}},{key:"resetForm",value:function(){this.props.history.push("/admin/manage-research/assign-research")}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,s=t.categoryList,n=t.employeeList,o=t.templateList,r=t.formErrors,i="";a&&(i=c.a.createElement(N.a,null));var l=""===this.state.inspectionId;return c.a.createElement("div",{className:"animated fadeIn"},c.a.createElement(d.a,null,c.a.createElement(m.a,{lg:12},c.a.createElement(p.a,null,c.a.createElement(u.a,{className:"mainHeading"},c.a.createElement("strong",null,"Clinical Trials")),c.a.createElement(f.a,null,i,c.a.createElement(I.a,null),c.a.createElement(g.a,{onSubmit:this.submitHandler,noValidate:!0},c.a.createElement(d.a,null,c.a.createElement(m.a,{lg:12},c.a.createElement(h.a,null,c.a.createElement(b.a,{htmlFor:"inspection_name"},"Clinical Trials Name"),c.a.createElement(v.a,{type:"text",placeholder:"Clinical Trials Name *",invalid:void 0!==r.inspection_name&&""!==r.inspection_name,value:this.state.formField.inspection_name,onChange:this.changeHandler,id:"inspection_name",name:"inspection_name",required:!0}),c.a.createElement("div",{className:"invalid-feedback"},r.inspection_name))),c.a.createElement(m.a,{lg:6},c.a.createElement(h.a,null,c.a.createElement(b.a,{htmlFor:"categoryId"},"Category ",c.a.createElement("span",{className:"mandatory"},"*")),c.a.createElement(v.a,{type:"select",placeholder:"category Name *",id:"categoryId",invalid:void 0!==r.categoryId&&""!==r.categoryId,name:"categoryId",value:this.state.formField.categoryId,onChange:this.changeCategoryHandle,required:!0},c.a.createElement("option",{value:""},"Select Category"),s.map((function(t,a){return c.a.createElement(S,{key:a,categoryItem:t,selectedCategory:e.state.formField.categoryId})}))),c.a.createElement("div",{className:"invalid-feedback"},r.categoryId))),c.a.createElement(m.a,{lg:6},c.a.createElement(h.a,null,c.a.createElement(b.a,{htmlFor:"templateId"},"Template ",c.a.createElement("span",{className:"mandatory"},"*")),c.a.createElement(v.a,{type:"select",placeholder:"Subcategory Name *",id:"templateId",invalid:void 0!==r.templateId&&""!==r.templateId,name:"templateId",value:this.state.formField.templateId,onChange:this.changeHandler,required:!0},c.a.createElement("option",{value:""},"Select Template"),o.map((function(t,a){return c.a.createElement(k,{key:a,templateItem:t,selectedCategory:e.state.formField.templateId})}))),c.a.createElement("div",{className:"invalid-feedback"},r.templateId)),this.state.formField.templateId?c.a.createElement(m.a,{lg:5,md:5},c.a.createElement("div",{className:"previewTemplateIcon"},c.a.createElement(E.Link,{to:"/common/template/".concat(this.state.formField.templateId),target:"_blank",className:"Preview-btn"},"Preview Template "))):""),c.a.createElement(m.a,{md:6},c.a.createElement(h.a,null,c.a.createElement(b.a,{htmlFor:"employee"},"Employee"),c.a.createElement(v.a,{type:"select",multiple:l,invalid:void 0!==r.employee&&""!==r.employee,name:"employeeId",value:this.state.employeeIds,onChange:this.changeEmployeeHandler,required:!0},c.a.createElement("option",{value:""},"Select Employee"),n.map((function(e,t){return c.a.createElement(T,{key:t,employeeItem:e})}))),c.a.createElement("div",{className:"invalid-feedback"},r.employee))),c.a.createElement(m.a,{md:12}),c.a.createElement(y.a,{color:"primary",disabled:!this.state.formValid,type:"submit"},"Save"),c.a.createElement(y.a,{color:"secondary",onClick:this.resetForm},"Cancel"))))))))}}]),a}(c.a.Component));function S(e){var t=e.categoryItem;return c.a.createElement("option",{value:t.categoryId},t.categoryName)}function k(e){var t=e.templateItem;return c.a.createElement("option",{value:t.templateId},t.templateName)}function T(e){var t=e.employeeItem;return c.a.createElement("option",{value:t.authId},t.firstName," ",t.lastName)}t.default=O},297:function(e,t,a){"use strict";var s=a(0),n=a.n(s);a(299);t.a=function(){return n.a.createElement("div",{className:"loaderSection"},n.a.createElement("div",{className:"spinner-border text-primary",role:"status"},n.a.createElement("span",{className:"sr-only"},"Loading...")))}},299:function(e,t,a){},314:function(e,t,a){"use strict";var s=a(5),n=a(21),o=a(0),r=a.n(o),i=a(30),l=a.n(i),c=a(290),d=a.n(c),m=a(291),p={tag:m.p,inverse:l.a.bool,color:l.a.string,body:l.a.bool,outline:l.a.bool,className:l.a.string,cssModule:l.a.object,innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])},u=function(e){var t=e.className,a=e.cssModule,o=e.color,i=e.body,l=e.inverse,c=e.outline,p=e.tag,u=e.innerRef,f=Object(n.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),g=Object(m.l)(d()(t,"card",!!l&&"text-white",!!i&&"card-body",!!o&&(c?"border":"bg")+"-"+o),a);return r.a.createElement(p,Object(s.a)({},f,{className:g,ref:u}))};u.propTypes=p,u.defaultProps={tag:"div"},t.a=u},317:function(e,t,a){"use strict";var s=a(5),n=a(21),o=a(0),r=a.n(o),i=a(30),l=a.n(i),c=a(290),d=a.n(c),m=a(291),p={tag:m.p,className:l.a.string,cssModule:l.a.object},u=function(e){var t=e.className,a=e.cssModule,o=e.tag,i=Object(n.a)(e,["className","cssModule","tag"]),l=Object(m.l)(d()(t,"card-header"),a);return r.a.createElement(o,Object(s.a)({},i,{className:l}))};u.propTypes=p,u.defaultProps={tag:"div"},t.a=u},322:function(e,t,a){"use strict";var s=a(5),n=a(21),o=a(0),r=a.n(o),i=a(30),l=a.n(i),c=a(290),d=a.n(c),m=a(291),p={children:l.a.node,row:l.a.bool,check:l.a.bool,inline:l.a.bool,disabled:l.a.bool,tag:m.p,className:l.a.string,cssModule:l.a.object},u=function(e){var t=e.className,a=e.cssModule,o=e.row,i=e.disabled,l=e.check,c=e.inline,p=e.tag,u=Object(n.a)(e,["className","cssModule","row","disabled","check","inline","tag"]),f=Object(m.l)(d()(t,!!o&&"row",l?"form-check":"form-group",!(!l||!c)&&"form-check-inline",!(!l||!i)&&"disabled"),a);return"fieldset"===p&&(u.disabled=i),r.a.createElement(p,Object(s.a)({},u,{className:f}))};u.propTypes=p,u.defaultProps={tag:"div"},t.a=u},323:function(e,t,a){"use strict";var s=a(5),n=a(21),o=a(0),r=a.n(o),i=a(30),l=a.n(i),c=a(290),d=a.n(c),m=a(291),p=l.a.oneOfType([l.a.number,l.a.string]),u=l.a.oneOfType([l.a.string,l.a.number,l.a.shape({size:p,order:p,offset:p})]),f={children:l.a.node,hidden:l.a.bool,check:l.a.bool,size:l.a.string,for:l.a.string,tag:m.p,className:l.a.string,cssModule:l.a.object,xs:u,sm:u,md:u,lg:u,xl:u,widths:l.a.array},g={tag:"label",widths:["xs","sm","md","lg","xl"]},h=function(e,t,a){return!0===a||""===a?e?"col":"col-"+t:"auto"===a?e?"col-auto":"col-"+t+"-auto":e?"col-"+a:"col-"+t+"-"+a},b=function(e){var t=e.className,a=e.cssModule,o=e.hidden,i=e.widths,l=e.tag,c=e.check,p=e.size,u=e.for,f=Object(n.a)(e,["className","cssModule","hidden","widths","tag","check","size","for"]),g=[];i.forEach((function(t,s){var n=e[t];if(delete f[t],n||""===n){var o,r=!s;if(Object(m.j)(n)){var i,l=r?"-":"-"+t+"-";o=h(r,t,n.size),g.push(Object(m.l)(d()(((i={})[o]=n.size||""===n.size,i["order"+l+n.order]=n.order||0===n.order,i["offset"+l+n.offset]=n.offset||0===n.offset,i))),a)}else o=h(r,t,n),g.push(o)}}));var b=Object(m.l)(d()(t,!!o&&"sr-only",!!c&&"form-check-label",!!p&&"col-form-label-"+p,g,!!g.length&&"col-form-label"),a);return r.a.createElement(l,Object(s.a)({htmlFor:u},f,{className:b}))};b.propTypes=f,b.defaultProps=g,t.a=b},324:function(e,t,a){"use strict";var s=a(5),n=a(21),o=a(303),r=a(9),i=a(0),l=a.n(i),c=a(30),d=a.n(c),m=a(290),p=a.n(m),u=a(291),f={children:d.a.node,type:d.a.string,size:d.a.string,bsSize:d.a.string,valid:d.a.bool,invalid:d.a.bool,tag:u.p,innerRef:d.a.oneOfType([d.a.object,d.a.func,d.a.string]),plaintext:d.a.bool,addon:d.a.bool,className:d.a.string,cssModule:d.a.object},g=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(o.a)(a)),a.focus=a.focus.bind(Object(o.a)(a)),a}Object(r.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.focus=function(){this.ref&&this.ref.focus()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,o=e.type,r=e.bsSize,i=e.valid,c=e.invalid,d=e.tag,m=e.addon,f=e.plaintext,g=e.innerRef,h=Object(n.a)(e,["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"]),b=["radio","checkbox"].indexOf(o)>-1,v=new RegExp("\\D","g"),y=d||("select"===o||"textarea"===o?o:"input"),I="form-control";f?(I+="-plaintext",y=d||"input"):"file"===o?I+="-file":b&&(I=m?null:"form-check-input"),h.size&&v.test(h.size)&&(Object(u.s)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),r=h.size,delete h.size);var E=Object(u.l)(p()(t,c&&"is-invalid",i&&"is-valid",!!r&&"form-control-"+r,I),a);return("input"===y||d&&"function"===typeof d)&&(h.type=o),h.children&&!f&&"select"!==o&&"string"===typeof y&&"select"!==y&&(Object(u.s)('Input with a type of "'+o+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete h.children),l.a.createElement(y,Object(s.a)({},h,{ref:g,className:E}))},t}(l.a.Component);g.propTypes=f,g.defaultProps={type:"text"},t.a=g},330:function(e,t,a){"use strict";var s=a(5),n=a(21),o=a(0),r=a.n(o),i=a(30),l=a.n(i),c=a(290),d=a.n(c),m=a(291),p={tag:m.p,className:l.a.string,cssModule:l.a.object,innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])},u=function(e){var t=e.className,a=e.cssModule,o=e.innerRef,i=e.tag,l=Object(n.a)(e,["className","cssModule","innerRef","tag"]),c=Object(m.l)(d()(t,"card-body"),a);return r.a.createElement(i,Object(s.a)({},l,{className:c,ref:o}))};u.propTypes=p,u.defaultProps={tag:"div"},t.a=u},336:function(e,t,a){"use strict";var s=a(5),n=a(21),o=a(0),r=a.n(o),i=a(30),l=a.n(i),c=a(290),d=a.n(c),m=a(291),p=l.a.oneOfType([l.a.number,l.a.string]),u={tag:m.p,noGutters:l.a.bool,className:l.a.string,cssModule:l.a.object,form:l.a.bool,xs:p,sm:p,md:p,lg:p,xl:p},f={tag:"div",widths:["xs","sm","md","lg","xl"]},g=function(e){var t=e.className,a=e.cssModule,o=e.noGutters,i=e.tag,l=e.form,c=e.widths,p=Object(n.a)(e,["className","cssModule","noGutters","tag","form","widths"]),u=[];c.forEach((function(t,a){var s=e[t];if(delete p[t],s){var n=!a;u.push(n?"row-cols-"+s:"row-cols-"+t+"-"+s)}}));var f=Object(m.l)(d()(t,o?"no-gutters":null,l?"form-row":"row",u),a);return r.a.createElement(i,Object(s.a)({},p,{className:f}))};g.propTypes=u,g.defaultProps=f,t.a=g},337:function(e,t,a){"use strict";var s=a(5),n=a(21),o=a(0),r=a.n(o),i=a(30),l=a.n(i),c=a(290),d=a.n(c),m=a(291),p=l.a.oneOfType([l.a.number,l.a.string]),u=l.a.oneOfType([l.a.bool,l.a.number,l.a.string,l.a.shape({size:l.a.oneOfType([l.a.bool,l.a.number,l.a.string]),order:p,offset:p})]),f={tag:m.p,xs:u,sm:u,md:u,lg:u,xl:u,className:l.a.string,cssModule:l.a.object,widths:l.a.array},g={tag:"div",widths:["xs","sm","md","lg","xl"]},h=function(e,t,a){return!0===a||""===a?e?"col":"col-"+t:"auto"===a?e?"col-auto":"col-"+t+"-auto":e?"col-"+a:"col-"+t+"-"+a},b=function(e){var t=e.className,a=e.cssModule,o=e.widths,i=e.tag,l=Object(n.a)(e,["className","cssModule","widths","tag"]),c=[];o.forEach((function(t,s){var n=e[t];if(delete l[t],n||""===n){var o=!s;if(Object(m.j)(n)){var r,i=o?"-":"-"+t+"-",p=h(o,t,n.size);c.push(Object(m.l)(d()(((r={})[p]=n.size||""===n.size,r["order"+i+n.order]=n.order||0===n.order,r["offset"+i+n.offset]=n.offset||0===n.offset,r)),a))}else{var u=h(o,t,n);c.push(u)}}})),c.length||c.push("col");var p=Object(m.l)(d()(t,c),a);return r.a.createElement(i,Object(s.a)({},l,{className:p}))};b.propTypes=f,b.defaultProps=g,t.a=b},341:function(e,t,a){},361:function(e,t,a){"use strict";var s=a(5),n=a(21),o=a(303),r=a(9),i=a(0),l=a.n(i),c=a(30),d=a.n(c),m=a(290),p=a.n(m),u=a(291),f={children:d.a.node,inline:d.a.bool,tag:u.p,innerRef:d.a.oneOfType([d.a.object,d.a.func,d.a.string]),className:d.a.string,cssModule:d.a.object},g=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(o.a)(a)),a.submit=a.submit.bind(Object(o.a)(a)),a}Object(r.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.submit=function(){this.ref&&this.ref.submit()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,o=e.inline,r=e.tag,i=e.innerRef,c=Object(n.a)(e,["className","cssModule","inline","tag","innerRef"]),d=Object(u.l)(p()(t,!!o&&"form-inline"),a);return l.a.createElement(r,Object(s.a)({},c,{ref:i,className:d}))},t}(i.Component);g.propTypes=f,g.defaultProps={tag:"form"},t.a=g}}]);
//# sourceMappingURL=22.f6009e39.chunk.js.map