(this.webpackJsonpResearchYourHealth=this.webpackJsonpResearchYourHealth||[]).push([[33],{1118:function(e,t,a){},1206:function(e,t,a){"use strict";a.r(t);var n=a(39),r=a(40),o=a(71),l=a(70),s=a(69),i=a(0),c=a.n(i),u=a(336),m=a(337),d=a(314),p=a(317),f=a(507),b=a(330),h=a(634),g=a(1151),v=a(359),y=a(506),E=a(322),S=a(323),_=a(324),A=a(830),j=a(831),N=a(302),O=(a(305),a(47)),k=a(297),P=a(308),I=a(306),T=a(315),F=a.n(T),x=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={buttonProcessing:!1,rowIndex:"",dataTableItem:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"editSubscriptionItem",value:function(e){this.props.editSubscriptionAction(e)}},{key:"deleteSubscriptionItem",value:function(e){this.props.deleteSubscriptionAction(e)}},{key:"render",value:function(){var e,t=this,a=[],n=Object(I.a)(this.props.data.entries());try{for(n.s();!(e=n.n()).done;){var r=Object(P.a)(e.value,2),o=r[0],l=r[1];console.log(o);var s=l.planVariation,i={planId:l.planId,planName:l.planName,amount:"$".concat(s[0].amount," / $").concat(s[1].amount),duration:"Monthly / Yearly",userAccess:l.userAccess||" ",templateAccess:l.templateAccess||" ",status:l.status?"Active":"Inactive",action:""};a.push(i)}}catch(d){n.e(d)}finally{n.f()}var u=[{label:"Plan Name",name:"planName"},{label:"Amount",name:"amount"},{label:"Plan Type",name:"duration"},{label:"Status",name:"status"},{label:"Action",name:"action",options:{filter:!0,customBodyRender:function(e,a,n){var r=a.rowIndex;return c.a.createElement("p",null,c.a.createElement("button",{className:"btn-edit",title:"Edit Plan",disabled:t.state.buttonProcessing,onClick:function(){return t.editSubscriptionItem(r)}},c.a.createElement("i",{className:"fa fa-pencil"})," "))}}}],m={search:!0,viewColumns:!1,filter:!1,searchOpen:!1,print:!1,download:!1,responsive:"stacked",selectableRows:"none",textLabels:{body:{noMatch:this.props.dataTableLoadingStatus?"Processing........":"",toolTip:"Sort",columnHeaderTooltip:function(e){return"Sort for ".concat(e.label)}}},fixedHeaderOptions:{xAxis:!1,yAxis:!1}};return c.a.createElement(F.a,{title:"Subscription Plan List",data:a,columns:u,options:m})}}]),a}(i.Component),w=(a(1118),function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).changeHandler=function(e){var t=e.target.name,a=e.target.value,n=r.state.formField;n[t]=a;var o=e.target.validity.valid,l=e.target.validationMessage;r.setState({formField:n},(function(){r.validateField(t,a,o,l)}))},r.changeCheckBoxHandle=function(e){var t=e.target.name,a=!1;e.target.checked&&(a=!0);var n=r.state.formField;n[t]=a,r.setState({formField:n})},r.toggle=function(){r.setState({modal:!r.state.modal,rowIndex:-1,formProccessing:!1,formValid:!0,formField:{plan_name:"",amount:"",yearly_amount:"",isTrail:!1,isSingleUser:!1,period:"",duration:"",plan_type:"",number_employee:"",number_template:"",trail_days:0,status:""},formErrors:{plan_name:"",amount:"",period:"",duration:"",plan_type:"",number_employee:"",number_template:"",error:""}})},r.state={modal:!1,planList:[],loading:!0,formProccessing:!1,rowIndex:-1,formField:{plan_name:"",amount:"",yearly_amount:"",period:"",isTrail:!1,isSingleUser:!1,duration:"",plan_type:"",number_employee:"",number_template:"",trail_days:0},formErrors:{plan_name:"",amount:"",yearly_amount:"",period:"",duration:"",plan_type:"",number_employee:"",number_template:"",error:""},formValid:!0},r.handleEditSubscription=r.handleEditSubscription.bind(Object(o.a)(r)),r.submitHandler=r.submitHandler.bind(Object(o.a)(r)),r.handleDeleteSubscription=r.handleDeleteSubscription.bind(Object(o.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.planList()}},{key:"planList",value:function(){var e=this;this.setState({loading:!0},(function(){O.a.getAPIWithAccessToken("subscription").then((function(t){if(void 0===t.data.data||!t.data.status)return e.setState({loading:!1}),void N.b.error(t.data.message);e.setState({loading:!1,planList:t.data.data})})).catch((function(t){void 0!==t.response&&401===t.response.status?(localStorage.clear(),e.props.history.push("/login")):(e.setState({loading:!1}),N.b.error(t.message))}))}))}},{key:"submitHandler",value:function(e){var t=this;if(e.preventDefault(),e.target.className+=" was-validated",!1===this.validateForm())return!1;this.setState({formProccessing:!0},(function(){var e=t.state.formField,a={planName:e.plan_name,isTrail:e.isTrail,isSingleUser:e.isSingleUser,planVariation:[{amount:Number(e.amount),duration:1},{amount:Number(e.yearly_amount),duration:4}],userAccess:Number(e.number_employee),templateAccess:Number(e.number_template),status:""===e.status||"Active"===e.status},n=t.state.rowIndex;if(n>-1){var r=t.state.planList[n];O.a.putAPIWithAccessToken("subscription/"+r.planId,a).then((function(e){if(void 0===e.data.data||!e.data.status)return t.setState({formProccessing:!1}),void N.b.error(e.data.message);t.setState({modal:!1,formProccessing:!1}),N.b.success(e.data.message),t.planList()})).catch((function(e){void 0!==e.response&&401===e.response.status?(localStorage.clear(),t.props.history.push("/login")):t.setState({formProccessing:!1}),N.b.error(e.message)}))}else O.a.postAPIWithAccessToken("subscription",a).then((function(e){if(void 0===e.data.data||!e.data.status)return t.setState({formProccessing:!1}),void N.b.error(e.data.message);t.setState({modal:!1}),N.b.success(e.data.message),t.planList()})).catch((function(e){void 0!==e.response&&401===e.response.status?(localStorage.clear(),t.props.history.push("/login")):t.setState({formProccessing:!1}),N.b.error(e.message)}))}))}},{key:"validateField",value:function(e,t,a,n){var r=this.state.formErrors;r.error="",r[e]=a?"":n,this.setState({formErrors:r},this.validateForm)}},{key:"validateForm",value:function(){var e=this.state.formErrors,t=this.state.formField;return""===e.plan_name&&""!==t.plan_name&&""===e.amount&&""!==t.amount&&""===e.yearly_amount&&""!==t.yearly_amount}},{key:"errorClass",value:function(e){return 0===e.length?"":"has-error"}},{key:"handleEditSubscription",value:function(e){var t=this.state.planList[e],a=t.planVariation[0],n=t.planVariation[1],r=t.status?"Active":"Inactive",o={planId:t.planId,plan_name:t.planName,isTrail:t.isTrail,isSingleUser:t.isSingleUser,amount:void 0!==a?a.amount:"",yearly_amount:void 0!==n?n.amount:"",number_employee:t.userAccess,number_template:t.templateAccess,status:r};this.setState({rowIndex:e,formField:o,formProccessing:!1,modal:!0,formValid:!0})}},{key:"handleDeleteSubscription",value:function(e){}},{key:"render",value:function(){var e=this.state,t=e.planList,a=e.loading,n=e.modal,r=e.formProccessing,o=e.formErrors,l="";a&&(l=c.a.createElement(k.a,null));var s=c.a.createElement(c.a.Fragment,null,"Submit ",c.a.createElement("i",{className:"fa fa-spinner"}));return c.a.createElement("div",{className:"animated fadeIn"},c.a.createElement(u.a,null,l,c.a.createElement(m.a,{lg:12},c.a.createElement(d.a,null,c.a.createElement(p.a,{className:"mainHeading"},c.a.createElement("strong",null,"Subscription Plan List")," ",c.a.createElement(f.a,{color:"button",className:"categoryAdd",type:"button",onClick:this.toggle},c.a.createElement("i",{className:"fa fa-plus"})," Add Plan")),c.a.createElement(b.a,null,c.a.createElement(u.a,null,c.a.createElement(m.a,{md:12},c.a.createElement(x,{data:t,editSubscriptionAction:this.handleEditSubscription,deleteSubscriptionAction:this.handleDeleteSubscription,dataTableLoadingStatus:this.state.loading}))))))),c.a.createElement(h.a,{isOpen:n,toggle:this.toggle,className:"full-width-modal-section store-modal"},c.a.createElement(g.a,{toggle:this.toggle},"Plan "),c.a.createElement(v.a,{onSubmit:this.submitHandler,noValidate:!0},c.a.createElement(y.a,null,c.a.createElement(u.a,null,c.a.createElement(m.a,{md:"6"},c.a.createElement(E.a,null,c.a.createElement(S.a,{htmlFor:"plan_name"},"Plan Name"),c.a.createElement(_.a,{type:"text",placeholder:"Plan Name *",id:"plan_name",name:"plan_name",value:this.state.formField.plan_name,onChange:this.changeHandler,required:!0}),c.a.createElement(A.a,null,o.plan_name))),c.a.createElement(m.a,{md:"6"},c.a.createElement(E.a,null,c.a.createElement(S.a,{htmlFor:"amount"},"Monthly Amount"),c.a.createElement(_.a,{type:"text",placeholder:"Monthly Amount *",id:"amount",name:"amount",value:this.state.formField.amount,onChange:this.changeHandler,required:!0}),c.a.createElement(A.a,null,o.amount))),c.a.createElement(m.a,{md:"6"},c.a.createElement(E.a,null,c.a.createElement(S.a,{htmlFor:"amount"},"Yearly Amount"),c.a.createElement(_.a,{type:"text",placeholder:"Yearly Amount *",id:"yearly_amount",name:"yearly_amount",value:this.state.formField.yearly_amount,onChange:this.changeHandler,required:!0}),c.a.createElement(A.a,null,o.amount))),c.a.createElement(m.a,{md:"6"},c.a.createElement(E.a,null,c.a.createElement(S.a,{htmlFor:"plan_type"},"Status"),c.a.createElement(_.a,{type:"select",placeholder:"Status ",id:"plan_type",name:"status",value:this.state.formField.status,onChange:this.changeHandler,required:!0},c.a.createElement("option",{value:""},"Select Status"),c.a.createElement("option",{value:"Active"},"Active"),c.a.createElement("option",{value:"Inactive"},"Inactive")))),c.a.createElement(m.a,{md:6},c.a.createElement(E.a,null,c.a.createElement("input",{type:"checkbox",checked:this.state.formField.isTrail,name:"isTrail",onChange:this.changeCheckBoxHandle})," Enable 1 Month Trial Period ")),c.a.createElement(m.a,{md:6},c.a.createElement(E.a,null,c.a.createElement("input",{type:"checkbox",checked:this.state.formField.isSingleUser,name:"isSingleUser",onChange:this.changeCheckBoxHandle})," Is Single User Subscription Plan")))),c.a.createElement(j.a,null,c.a.createElement(f.a,{color:"primary",disabled:!this.state.formValid||r,type:"submit"},r?s:"Submit"),c.a.createElement(f.a,{color:"secondary",onClick:this.toggle},"Cancel")))))}}]),a}(i.Component));t.default=w},297:function(e,t,a){"use strict";var n=a(0),r=a.n(n);a(299);t.a=function(){return r.a.createElement("div",{className:"loaderSection"},r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))}},299:function(e,t,a){},300:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(307);function r(e,t){if(e){if("string"===typeof e)return Object(n.a)(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(n.a)(e,t):void 0}}},306:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(300);function r(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Object(n.a)(e))){var t=0,a=function(){};return{s:a,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,l=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){s=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(s)throw o}}}}},307:function(e,t,a){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}a.d(t,"a",(function(){return n}))},308:function(e,t,a){"use strict";var n=a(300);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(n=(l=s.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(i){r=!0,o=i}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return a}}(e,t)||Object(n.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a.d(t,"a",(function(){return r}))},314:function(e,t,a){"use strict";var n=a(5),r=a(21),o=a(0),l=a.n(o),s=a(30),i=a.n(s),c=a(290),u=a.n(c),m=a(291),d={tag:m.p,inverse:i.a.bool,color:i.a.string,body:i.a.bool,outline:i.a.bool,className:i.a.string,cssModule:i.a.object,innerRef:i.a.oneOfType([i.a.object,i.a.string,i.a.func])},p=function(e){var t=e.className,a=e.cssModule,o=e.color,s=e.body,i=e.inverse,c=e.outline,d=e.tag,p=e.innerRef,f=Object(r.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),b=Object(m.l)(u()(t,"card",!!i&&"text-white",!!s&&"card-body",!!o&&(c?"border":"bg")+"-"+o),a);return l.a.createElement(d,Object(n.a)({},f,{className:b,ref:p}))};p.propTypes=d,p.defaultProps={tag:"div"},t.a=p},317:function(e,t,a){"use strict";var n=a(5),r=a(21),o=a(0),l=a.n(o),s=a(30),i=a.n(s),c=a(290),u=a.n(c),m=a(291),d={tag:m.p,className:i.a.string,cssModule:i.a.object},p=function(e){var t=e.className,a=e.cssModule,o=e.tag,s=Object(r.a)(e,["className","cssModule","tag"]),i=Object(m.l)(u()(t,"card-header"),a);return l.a.createElement(o,Object(n.a)({},s,{className:i}))};p.propTypes=d,p.defaultProps={tag:"div"},t.a=p},330:function(e,t,a){"use strict";var n=a(5),r=a(21),o=a(0),l=a.n(o),s=a(30),i=a.n(s),c=a(290),u=a.n(c),m=a(291),d={tag:m.p,className:i.a.string,cssModule:i.a.object,innerRef:i.a.oneOfType([i.a.object,i.a.string,i.a.func])},p=function(e){var t=e.className,a=e.cssModule,o=e.innerRef,s=e.tag,i=Object(r.a)(e,["className","cssModule","innerRef","tag"]),c=Object(m.l)(u()(t,"card-body"),a);return l.a.createElement(s,Object(n.a)({},i,{className:c,ref:o}))};p.propTypes=d,p.defaultProps={tag:"div"},t.a=p},830:function(e,t,a){"use strict";var n=a(5),r=a(21),o=a(0),l=a.n(o),s=a(30),i=a.n(s),c=a(290),u=a.n(c),m=a(291),d={children:i.a.node,tag:m.p,className:i.a.string,cssModule:i.a.object,valid:i.a.bool,tooltip:i.a.bool},p={tag:"div",valid:void 0},f=function(e){var t=e.className,a=e.cssModule,o=e.valid,s=e.tooltip,i=e.tag,c=Object(r.a)(e,["className","cssModule","valid","tooltip","tag"]),d=s?"tooltip":"feedback",p=Object(m.l)(u()(t,o?"valid-"+d:"invalid-"+d),a);return l.a.createElement(i,Object(n.a)({},c,{className:p}))};f.propTypes=d,f.defaultProps=p,t.a=f}}]);
//# sourceMappingURL=33.1d5614f7.chunk.js.map