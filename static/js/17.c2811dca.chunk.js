(this.webpackJsonpResearchYourHealth=this.webpackJsonpResearchYourHealth||[]).push([[17],{1117:function(e,t,n){},1204:function(e,t,n){"use strict";n.r(t);var o=n(39),a=n(40),r=n(71),i=n(70),s=n(69),l=n(0),c=n.n(l),u=n(336),d=n(337),m=n(314),g=n(317),f=n(514),p=n(330),h=n(322),v=n(323),y=n(324),b=n(634),S=n(1151),E=n(361),_=n(513),O=n(831),w=n(624),I=n(302),P=(n(305),n(47)),C=n(327),A=n(421),L=n(297),k=n(308),j=n(306),N=n(315),F=n.n(N),x=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={buttonProcessing:!1,rowIndex:"",dataTableItem:[]},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){}},{key:"editStoreItem",value:function(e){this.props.editStoreAction(e)}},{key:"deleteStoreItem",value:function(e){this.props.deleteStoreAction(e)}},{key:"render",value:function(){var e,t=this,n=[],o=Object(j.a)(this.props.data.entries());try{for(o.s();!(e=o.n()).done;){var a=Object(k.a)(e.value,2),r=a[0],i=a[1];console.log(r);var s={organizationName:i.organizationName,storeName:i.storeName,phoneNumber:i.phoneNumber||" ",address:i.address||" ",city:i.city||" ",state:i.state||" ",country:i.country||" ",storeLevelStatus:i.storeLevelStatus?1===i.storeLevelStatus?"Silver":2===i.storeLevelStatus?"Gold":"Platinum":"Silver",status:i.status?"Active":"Inactive",action:""};n.push(s)}}catch(d){o.e(d)}finally{o.f()}var l=[{label:"Store Name",name:"storeName"},{label:"Organization Name",name:"organizationName"},{label:"Address",name:"address"},{label:"Phone Number",name:"phoneNumber"},{label:"Store Level",name:"storeLevelStatus"},{label:"Status",name:"status"},{label:"Action",name:"action",options:{filter:!0,customBodyRender:function(e,n,o){var a=n.rowIndex;return c.a.createElement("p",null,c.a.createElement("button",{title:"Edit Store",className:"btn-edit",disabled:t.state.buttonProcessing,onClick:function(){return t.editStoreItem(a)}},c.a.createElement("i",{className:"fa fa-pencil"})," "),c.a.createElement("button",{title:"Delete Store",className:"btn-delete",disabled:t.state.buttonProcessing,onClick:function(){return t.deleteStoreItem(a)}},c.a.createElement("i",{className:"fa fa-trash"})))}}}],u={search:!1,viewColumns:!1,filter:!1,searchOpen:!1,print:!1,download:!1,responsive:"stacked",selectableRows:"none",textLabels:{body:{noMatch:this.props.dataTableLoadingStatus?"Processing........":"",toolTip:"Sort",columnHeaderTooltip:function(e){return"Sort for ".concat(e.label)}}},fixedHeaderOptions:{xAxis:!1,yAxis:!1}};return c.a.createElement(F.a,{data:n,columns:l,options:u})}}]),n}(l.Component),z=(n(1117),function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).changeHandler=function(e){var t=e.target.name,n=e.target.value,o=a.state.formField;o[t]=n,a.setState({formField:o},(function(){a.validateField(t,n)}))},a.changeFilterHandler=function(e){var t=e.target.name,n=e.target.value,o=a.state.filterItem;o[t]=n,a.setState({filterItem:o})},a.toggle=function(){a.setState({modal:!a.state.modal,rowIndex:-1,formValid:!1,formField:{store_name:"",phoneNumber:"",address:"",city:"",state:"",country:"",postalCode:""},formErrors:{store_name:"",error:""}})},a.state={modal:!1,storeList:[],organizationList:[],loading:!0,formProccessing:!1,rowIndex:-1,formField:{organizationId:"",store_name:"",phoneNumber:"",address:"",city:"",state:"",country:"",postalCode:""},formErrors:{store_name:"",error:""},formValid:!1,filterItem:{filter_organization_id:"",country:"",state:"",custom_search:""}},a.handleEditStore=a.handleEditStore.bind(Object(r.a)(a)),a.submitHandler=a.submitHandler.bind(Object(r.a)(a)),a.handleDeleteStore=a.handleDeleteStore.bind(Object(r.a)(a)),a.filterStoreList=a.filterStoreList.bind(Object(r.a)(a)),a.resetSearchFilter=a.resetSearchFilter.bind(Object(r.a)(a)),a.setLatitudeLongitude=a.setLatitudeLongitude.bind(Object(r.a)(a)),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t="";if(void 0!==e.organizationId){t=e.organizationId;var n=this.state.filterItem;n.filter_organization_id=e.organizationId,this.setState({filterItem:n})}this.storeList({filter_organization_id:t}),this.organizationList()}},{key:"setLatitudeLongitude",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",i=this.state.formField;i.state=o,i.latitude=t.latitude,i.longitude=t.longitude,i.country=a,i.city=n,i.postalCode=r,i.address=e,this.setState({formField:i})}},{key:"storeList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="";void 0!==t.filter_organization_id&&""!==t.filter_organization_id&&(n+=""!==n?"&organizationId="+t.filter_organization_id:"?organizationId="+t.filter_organization_id),void 0!==t.country&&""!==t.country&&(n+=""!==n?"&country="+t.country:"?country="+t.country),void 0!==t.state&&""!==t.state&&(n+=""!==n?"&state="+t.state:"?state="+t.state),void 0!==t.custom_search&&""!==t.custom_search&&(n+=""!==n?"&keyword="+t.custom_search:"?keyword="+t.custom_search),this.setState({loading:!0},(function(){P.a.getAPIWithAccessToken("store"+n).then((function(t){if(void 0===t.data.data||!t.data.status)return e.setState({loading:!1}),void I.b.error(t.data.message);e.setState({loading:!1,storeList:t.data.data})})).catch((function(t){void 0!==t.response&&401===t.response.status?(localStorage.clear(),e.props.history.push("/login")):(e.setState({loading:!1}),I.b.error(t.message))}))}))}},{key:"organizationList",value:function(){var e=this;P.a.getAPIWithAccessToken("organization").then((function(t){if(void 0===t.data.data||!t.data.status)return e.setState({loading:!1}),void I.b.error(t.data.message);e.setState({loading:!1,organizationList:t.data.data})})).catch((function(t){void 0!==t.response&&401===t.response.status?(localStorage.clear(),e.props.history.push("/login")):e.setState({loading:!1})}))}},{key:"filterStoreList",value:function(){var e=this.state.filterItem;this.storeList(e)}},{key:"submitHandler",value:function(e){var t=this;e.preventDefault(),e.target.className+=" was-validated",this.setState({formProccessing:!0},(function(){var e=t.state.formField,n={storeName:e.store_name,phoneNumber:e.phoneNumber,address:e.address,city:e.city,state:e.state,latitude:e.latitude,longitude:e.longitude,country:e.country,postalCode:e.postalCode,organizationId:e.organizationId},o=t.state.rowIndex;if(o>-1){var a=t.state.storeList[o];P.a.putAPIWithAccessToken("store/"+a.storeId,n).then((function(e){if(void 0===e.data.data||!e.data.status)return t.setState({formProccessing:!1}),void I.b.error(e.data.message);t.setState({modal:!1,formProccessing:!1}),I.b.success(e.data.message),t.storeList()})).catch((function(e){void 0!==e.response&&401===e.response.status?(localStorage.clear(),t.props.history.push("/login")):t.setState({formProccessing:!1}),I.b.error(e.message)}))}else P.a.postAPIWithAccessToken("store",n).then((function(e){if(void 0===e.data.data||!e.data.status)return t.setState({formProccessing:!1}),void I.b.error(e.data.message);t.setState({modal:!1}),I.b.success(e.data.message),t.storeList()})).catch((function(e){void 0!==e.response&&401===e.response.status?(localStorage.clear(),t.props.history.push("/login")):t.setState({formProccessing:!1}),I.b.error(e.message)}))}))}},{key:"validateField",value:function(e,t){var n=this.state.formErrors;switch(n.error="",e){case"store_name":n.store_name=""!==t?"":" is required"}this.setState({formErrors:n},this.validateForm)}},{key:"validateForm",value:function(){var e=this.state.formErrors,t=this.state.formField;this.setState({formValid:""===e.store_name&&""!==t.store_name})}},{key:"errorClass",value:function(e){return 0===e.length?"":"has-error"}},{key:"handleEditStore",value:function(e){var t=this.state.storeList[e],n={organizationId:t.organizationId,store_name:t.storeName,phoneNumber:t.phoneNumber,address:t.address,city:t.city,state:t.state,country:t.country,postalCode:t.postalCode};this.setState({rowIndex:e,formField:n,modal:!0,formValid:!0})}},{key:"handleDeleteStore",value:function(e){var t=this,n=this.state.storeList[e];this.setState({loading:!0},(function(){P.a.deleteAPIWithAccessToken("store",{storeId:n.storeId}).then((function(e){if(void 0===e.data.data||!e.data.status)return t.setState({loading:!1}),void I.b.error(e.data.message);t.setState({modal:!1,loading:!1}),I.b.success(e.data.message),t.storeList()})).catch((function(e){void 0!==e.response&&401===e.response.status?(localStorage.clear(),t.props.history.push("/login")):t.setState({loading:!1}),I.b.error(e.message)}))}))}},{key:"selectCountry",value:function(e){var t=this.state.formField;t.country=e,this.setState({formField:t})}},{key:"selectRegion",value:function(e){var t=this.state.formField;t.state=e,this.setState({formField:t})}},{key:"selectFilterCountry",value:function(e){var t=this.state.filterItem;t.country=e,this.setState({filterItem:t})}},{key:"selectFilterRegion",value:function(e){var t=this.state.filterItem;t.state=e,this.setState({filterItem:t})}},{key:"resetSearchFilter",value:function(){this.setState({filterItem:{filter_organization_id:"",country:"",state:"",custom_search:""}}),this.storeList()}},{key:"render",value:function(){var e=this,t=this.state,n=t.storeList,o=t.loading,a=t.modal,r=t.formProccessing,i=t.organizationList,s="";o&&(s=c.a.createElement(L.a,null));var l=c.a.createElement(c.a.Fragment,null,"Submit ",c.a.createElement("i",{className:"fa fa-spinner"}));return c.a.createElement("div",{className:"animated fadeIn"},c.a.createElement(u.a,null,s,c.a.createElement(d.a,{lg:12},c.a.createElement(m.a,{className:"oep-card"},c.a.createElement(g.a,{className:"mainHeading"},c.a.createElement("strong",null,"Store List")," ",c.a.createElement(f.a,{color:"yellow",className:"categoryAdd",type:"button",onClick:this.toggle},c.a.createElement("i",{className:"fa fa-plus"})," Add Store")),c.a.createElement(p.a,null,c.a.createElement(u.a,null,c.a.createElement(d.a,{md:12,className:"search-filter"},c.a.createElement(u.a,null,c.a.createElement(d.a,{md:"2"},c.a.createElement(h.a,null,c.a.createElement(v.a,{htmlFor:"filter_organization_id"},"Organization"),c.a.createElement(y.a,{type:"select",placeholder:"Organization *",id:"filter_organization_id",name:"filter_organization_id",value:this.state.filterItem.filter_organization_id,onChange:this.changeFilterHandler},c.a.createElement("option",{value:""},"Select Organization"),i.map((function(e,t){return c.a.createElement(T,{key:t,organizationInfo:e})}))))),c.a.createElement(d.a,{md:"2"},c.a.createElement(h.a,null,c.a.createElement(v.a,{htmlFor:"filter_organization_id"},"Country"),c.a.createElement(w.a,{id:"filterCountry",name:"filterCountry",priorityOptions:["US"],className:"form-control",value:this.state.filterItem.country,onChange:function(t){return e.selectFilterCountry(t)}}))),c.a.createElement(d.a,{md:"3"},c.a.createElement(h.a,null,c.a.createElement(v.a,{htmlFor:"filter_organization_id"},"State"),c.a.createElement(w.b,{id:"filterState",name:"filterState",className:"form-control",country:this.state.filterItem.country,defaultOptionLabel:"Select State",blankOptionLabel:"Select State",value:this.state.filterItem.state,onChange:function(t){return e.selectFilterRegion(t)}}))),c.a.createElement(d.a,{md:"3"},c.a.createElement(h.a,null,c.a.createElement(v.a,{htmlFor:"filter_organization_id"},"Search By Store/ City"),c.a.createElement(y.a,{type:"text",placeholder:"Search By Store/ City",id:"custom_search",name:"custom_search",value:this.state.formField.custom_search,onChange:this.changeFilterHandler}))),c.a.createElement(d.a,{md:"2"},c.a.createElement(h.a,{className:"filter-button-section"},c.a.createElement(v.a,{htmlFor:"filter_organization_id"},"\xa0"),c.a.createElement(f.a,{color:"success",className:"search-btn",type:"button",onClick:this.filterStoreList},"Search"),c.a.createElement(f.a,{color:"warning",className:"search-btn",id:"resetButton",type:"button",onClick:this.resetSearchFilter},"Reset"))))),c.a.createElement(d.a,{md:12},c.a.createElement(x,{data:n,editStoreAction:this.handleEditStore,deleteStoreAction:this.handleDeleteStore,dataTableLoadingStatus:this.state.loading}))))))),c.a.createElement(b.a,{isOpen:a,toggle:this.toggle,className:"full-width-modal-section store-modal"},c.a.createElement(S.a,{toggle:this.toggle},"Store"),c.a.createElement(E.a,{onSubmit:this.submitHandler,noValidate:!0},c.a.createElement(_.a,null,c.a.createElement(C.a,{formErrors:this.state.formErrors}),c.a.createElement(u.a,null,c.a.createElement(d.a,{md:"6"},c.a.createElement(h.a,null,c.a.createElement(v.a,{htmlFor:"organizationId"},"Organization"),c.a.createElement(y.a,{type:"select",placeholder:"Organization *",id:"organizationId",name:"organizationId",value:this.state.formField.organizationId,onChange:this.changeHandler,required:!0},c.a.createElement("option",{value:""},"Select Organization"),i.map((function(e,t){return c.a.createElement(T,{key:t,organizationInfo:e})}))))),c.a.createElement(d.a,{md:"6"},c.a.createElement(h.a,null,c.a.createElement(v.a,{htmlFor:"store_name"},"Store Name"),c.a.createElement(y.a,{type:"text",placeholder:"Store Name *",id:"store_name",name:"store_name",value:this.state.formField.store_name,onChange:this.changeHandler,required:!0}))),c.a.createElement(d.a,{md:"6"},c.a.createElement(h.a,null,c.a.createElement(v.a,{htmlFor:"phoneNumber"},"Contact Number"),c.a.createElement(y.a,{type:"text",placeholder:"Contact Number ",id:"phoneNumber",name:"phoneNumber",value:this.state.formField.phoneNumber,onChange:this.changeHandler}))),c.a.createElement(d.a,{md:"6"},c.a.createElement(h.a,null,c.a.createElement(v.a,{htmlFor:"address"},"Address"),c.a.createElement(A.a,{setLatitudeLongitude:this.setLatitudeLongitude,address:this.state.formField.address}))),c.a.createElement(d.a,{md:"6"},c.a.createElement(h.a,null,c.a.createElement(v.a,{htmlFor:"postalCode"},"Postal Code"),c.a.createElement(y.a,{type:"text",placeholder:"Postal Code",id:"postalCode",name:"postalCode",value:this.state.formField.postalCode,onChange:this.changeHandler}))))),c.a.createElement(O.a,null,c.a.createElement(f.a,{color:"primary",disabled:!this.state.formValid||r,type:"submit"},r?l:"Submit"),c.a.createElement(f.a,{color:"secondary",onClick:this.toggle},"Cancel")))))}}]),n}(l.Component));function T(e){var t=e.organizationInfo;return c.a.createElement("option",{value:t.authId},t.organizationName)}t.default=z},297:function(e,t,n){"use strict";var o=n(0),a=n.n(o);n(299);t.a=function(){return a.a.createElement("div",{className:"loaderSection"},a.a.createElement("div",{className:"spinner-border text-primary",role:"status"},a.a.createElement("span",{className:"sr-only"},"Loading...")))}},299:function(e,t,n){},327:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(0),a=n.n(o),r=(n(328),function(e){var t=e.formErrors;return a.a.createElement("div",{className:"col-md-12 col-lg-12"},a.a.createElement("div",{className:"formErrors"},Object.keys(t).map((function(e,n){if(t[e].length>0){var o=e.replace("_"," ");return a.a.createElement("p",{key:n},o," ",t[e])}return""}))))})},328:function(e,t,n){},352:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.geoPropTypes=t.geolocated=void 0;var o,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}(n(0)),r=(o=n(30))&&o.__esModule?o:{default:o};function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function d(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?g(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){return"Geolocated(".concat(e.displayName||e.name||"Component",")")};t.geolocated=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.positionOptions,n=void 0===t?{enableHighAccuracy:!0,maximumAge:0,timeout:1/0}:t,o=e.isOptimisticGeolocationEnabled,i=void 0===o||o,c=e.userDecisionTimeout,p=void 0===c?null:c,y=e.suppressLocationOnMount,b=void 0!==y&&y,S=e.watchPosition,E=void 0!==S&&S,_=e.geolocationProvider,O=void 0===_?"undefined"!==typeof navigator&&navigator.geolocation:_;return function(e){var t=function(t){function o(e){var t;return l(this,o),h(g(t=d(this,m(o).call(this,e))),"isCurrentlyMounted",!1),h(g(t),"cancelUserDecisionTimeout",(function(){t.userDecisionTimeoutId&&clearTimeout(t.userDecisionTimeoutId)})),h(g(t),"onPositionError",(function(e){t.cancelUserDecisionTimeout(),t.isCurrentlyMounted&&t.setState({coords:null,isGeolocationEnabled:!1,positionError:e}),t.props.onError&&t.props.onError(e)})),h(g(t),"onPositionSuccess",(function(e){t.cancelUserDecisionTimeout(),t.isCurrentlyMounted&&t.setState({coords:e.coords,isGeolocationEnabled:!0,positionError:null}),t.props.onSuccess&&t.props.onSuccess(e)})),h(g(t),"getLocation",(function(){if(!O||!O.getCurrentPosition||!O.watchPosition)throw new Error("The provided geolocation provider is invalid");var e=(E?O.watchPosition:O.getCurrentPosition).bind(O);p&&(t.userDecisionTimeoutId=setTimeout((function(){t.onPositionError()}),p)),t.watchId=e(t.onPositionSuccess,t.onPositionError,n)})),t.state={coords:null,isGeolocationAvailable:Boolean(O),isGeolocationEnabled:i,positionError:null},t}return f(o,t),u(o,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0,b||this.getLocation()}},{key:"componentWillUnmount",value:function(){this.isCurrentlyMounted=!1,this.cancelUserDecisionTimeout(),E&&O.clearWatch(this.watchId)}},{key:"render",value:function(){return a.default.createElement(e,s({},this.state,this.props))}}]),o}(a.Component);return t.displayName=v(e),t.propTypes={onError:r.default.func,onSuccess:r.default.func},t}};var y={coords:r.default.shape({latitude:r.default.number,longitude:r.default.number,altitude:r.default.number,accuracy:r.default.number,altitudeAccuracy:r.default.number,heading:r.default.number,speed:r.default.number}),isGeolocationAvailable:r.default.bool,isGeolocationEnabled:r.default.bool,positionError:r.default.shape({code:r.default.oneOf([1,2,3]),message:r.default.string}),watchPosition:r.default.bool};t.geoPropTypes=y},353:function(e,t,n){"use strict";var o=n(39),a=n(40),r=n(70),i=n(69),s=n(0),l=n.n(s),c=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={address:"",scriptLoading:!1},a}return Object(a.a)(n,[{key:"render",value:function(){return this.props.updateAddress(this.props.cords),l.a.createElement(l.a.Fragment,null)}}]),n}(l.a.Component);t.a=c},421:function(e,t,n){"use strict";var o=n(39),a=n(40),r=n(71),i=n(70),s=n(69),l=n(0),c=n.n(l),u=n(422),d=n.n(u),m=n(302),g=n(352),f=n(353),p=(n(427),n(47)),h=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).useCurrentLocation=function(e){a.state.locationEnabled?a.props.setLatitudeLongitude(a.state.currentAddress.formatted_address,{latitude:a.state.currentAddress.latitude,longitude:a.state.currentAddress.longitude},a.state.currentAddress.city,a.state.currentAddress.state,a.state.currentAddress.country,a.state.currentAddress.postal_code):m.b.error("Please allow to access your location")},a.handleChange=function(e){a.setState({address:e}),""===e&&a.props.setLatitudeLongitude(e,{lat:"",lng:""})},a.handleSelect=function(e){a.setState({address:e}),console.log(e);var t="",n="",o="",r="";Object(u.geocodeByAddress)(e).then((function(e){for(var a=e[0],i={premise:"short_name",street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"long_name",country:"long_name",postal_code:"long_name"},s=0;s<a.address_components.length;s++){var l=a.address_components[s].types[0];i[l]&&("locality"===l?t=a.address_components[s][i[l]]:"country"===l?o=a.address_components[s][i[l]]:"administrative_area_level_1"===l?n=a.address_components[s][i[l]]:"postal_code"===l&&(r=a.address_components[s][i[l]]))}Object(u.getLatLng)(e[0])})).then((function(i){return a.props.setLatitudeLongitude(e,i,t,n,o,r)})).catch((function(e){return console.error("Error",e)}))},a.state={address:"",latitude:"",longitude:"",scriptLoading:!1,currentAddress:{country:"",state:"",city:"",postal_code:"",formatted_address:"",latitude:"",longitude:""},locationEnabled:!1},a.updateGeoLocationAddress=a.updateGeoLocationAddress.bind(Object(r.a)(a)),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;if("undefined"===typeof google){var t=document.createElement("script");t.type="text/javascript",t.src="https://maps.google.com/maps/api/js?key=AIzaSyBmyGVmnHPHZp2eC1XNMx-GaBRC20g9Tck&libraries=places";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),t.addEventListener("load",(function(t){e.setState({scriptLoading:!0})}))}else this.setState({scriptLoading:!0})}},{key:"updateGeoLocationAddress",value:function(e){var t=this;e.latitude&&e.longitude&&this.setState({latitude:e.latitude,longitude:e.longitude,locationEnabled:!0},(function(){p.a.getExternalAPI("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.latitude+","+e.longitude+"&key="+p.a.getGoogleAPIKey()).then((function(n){var o=n.data.results?n.data.results[0]:[];if(void 0!==o.address_components&&o.address_components.length>0){var a=o.address_components.filter((function(e){return e.types.indexOf("country")>-1})),r=o.address_components.filter((function(e){return e.types.indexOf("administrative_area_level_1")>-1})),i=o.address_components.filter((function(e){return e.types.indexOf("administrative_area_level_2")>-1})),s=o.address_components.filter((function(e){return e.types.indexOf("postal_code")>-1})),l=o.formatted_address||"",c={country:a.length>0?a[0].long_name:"",state:r.length>0?r[0].long_name:"",city:i.length>0?i[0].long_name:"",postal_code:s.length>0?s[0].long_name:"",formatted_address:l,latitude:e.latitude,longitude:e.longitude};t.setState({currentAddress:c})}})).catch((function(e){}))}))}},{key:"render",value:function(){var e=""===this.state.address&&this.props.address?this.props.address:this.state.address;return this.state.scriptLoading?c.a.createElement(c.a.Fragment,null,this.props.isGeolocationAvailable&&this.props.isGeolocationEnabled?null==this.props.coords||this.state.locationEnabled?c.a.createElement(c.a.Fragment,null):c.a.createElement(f.a,{cords:this.props.coords,updateAddress:this.updateGeoLocationAddress}):c.a.createElement(c.a.Fragment,null),c.a.createElement("span",{className:"use-current-location pull-right",onClick:this.useCurrentLocation},c.a.createElement("span",{className:"location-icon"},c.a.createElement("img",{src:"https://retailoep.com/current_location.png",alt:" Current Location",className:"current-location-icon"})),"Use current location"),c.a.createElement(d.a,{value:e,onChange:this.handleChange,onSelect:this.handleSelect},(function(e){var t=e.getInputProps,n=e.suggestions,o=e.getSuggestionItemProps,a=e.loading;return c.a.createElement("div",null,c.a.createElement("input",t({name:"address",placeholder:"Search Location ...",className:"form-control location-search-input"})),c.a.createElement("div",{className:"autocomplete-dropdown-container"},a&&c.a.createElement("div",null,"Loading..."),n.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",n=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return c.a.createElement("div",o(e,{className:t,style:n}),c.a.createElement("strong",null,e.formattedSuggestion.mainText)," ",c.a.createElement("small",null,e.formattedSuggestion.secondaryText))}))))}))):c.a.createElement(c.a.Fragment,null)}}]),n}(c.a.Component);t.a=Object(g.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3})(h)},422:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLatLng=t.geocodeByPlaceId=t.geocodeByAddress=void 0;var o,a=n(423),r=(o=a)&&o.__esModule?o:{default:o},i=n(426);t.geocodeByAddress=i.geocodeByAddress,t.geocodeByPlaceId=i.geocodeByPlaceId,t.getLatLng=i.getLatLng,t.default=r.default},423:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=c(n(0)),i=c(n(30)),s=c(n(424)),l=n(425);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");n.autocompleteService=new window.google.maps.places.AutocompleteService,n.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,n.setState((function(e){return e.ready?null:{ready:!0}}))},n.autocompleteCallback=function(e,t){if(n.setState({loading:!1}),t===n.autocompleteOK){var o=n.props.highlightFirstSuggestion;n.setState({suggestions:e.map((function(e,t){return{id:e.id,description:e.description,placeId:e.place_id,active:!(!o||0!==t),index:t,formattedSuggestion:(n=e.structured_formatting,{mainText:n.main_text,secondaryText:n.secondary_text}),matchedSubstrings:e.matched_substrings,terms:e.terms,types:e.types};var n}))})}else n.props.onError(t,n.clearSuggestions)},n.fetchPredictions=function(){var e=n.props.value;e.length&&(n.setState({loading:!0}),n.autocompleteService.getPlacePredictions(o({},n.props.searchOptions,{input:e}),n.autocompleteCallback))},n.clearSuggestions=function(){n.setState({suggestions:[]})},n.clearActive=function(){n.setState({suggestions:n.state.suggestions.map((function(e){return o({},e,{active:!1})}))})},n.handleSelect=function(e,t){n.clearSuggestions(),n.props.onSelect?n.props.onSelect(e,t):n.props.onChange(e)},n.getActiveSuggestion=function(){return n.state.suggestions.find((function(e){return e.active}))},n.selectActiveAtIndex=function(e){var t=n.state.suggestions.find((function(t){return t.index===e})).description;n.setActiveAtIndex(e),n.props.onChange(t)},n.selectUserInputValue=function(){n.clearActive(),n.props.onChange(n.state.userInputValue)},n.handleEnterKey=function(){var e=n.getActiveSuggestion();void 0===e?n.handleSelect(n.props.value,null):n.handleSelect(e.description,e.placeId)},n.handleDownKey=function(){if(0!==n.state.suggestions.length){var e=n.getActiveSuggestion();void 0===e?n.selectActiveAtIndex(0):e.index===n.state.suggestions.length-1?n.selectUserInputValue():n.selectActiveAtIndex(e.index+1)}},n.handleUpKey=function(){if(0!==n.state.suggestions.length){var e=n.getActiveSuggestion();void 0===e?n.selectActiveAtIndex(n.state.suggestions.length-1):0===e.index?n.selectUserInputValue():n.selectActiveAtIndex(e.index-1)}},n.handleInputKeyDown=function(e){switch(e.key){case"Enter":e.preventDefault(),n.handleEnterKey();break;case"ArrowDown":e.preventDefault(),n.handleDownKey();break;case"ArrowUp":e.preventDefault(),n.handleUpKey();break;case"Escape":n.clearSuggestions()}},n.setActiveAtIndex=function(e){n.setState({suggestions:n.state.suggestions.map((function(t,n){return o({},t,n===e?{active:!0}:{active:!1})}))})},n.handleInputChange=function(e){var t=e.target.value;n.props.onChange(t),n.setState({userInputValue:t}),t?n.props.shouldFetchSuggestions&&n.debouncedFetchPredictions():n.clearSuggestions()},n.handleInputOnBlur=function(){n.mousedownOnSuggestion||n.clearSuggestions()},n.getActiveSuggestionId=function(){var e=n.getActiveSuggestion();return e?"PlacesAutocomplete__suggestion-"+e.placeId:void 0},n.getIsExpanded=function(){return n.state.suggestions.length>0},n.getInputProps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(e.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var t={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":n.getIsExpanded(),"aria-activedescendant":n.getActiveSuggestionId(),disabled:!n.state.ready};return o({},t,e,{onKeyDown:(0,l.compose)(n.handleInputKeyDown,e.onKeyDown),onBlur:(0,l.compose)(n.handleInputOnBlur,e.onBlur),value:n.props.value,onChange:function(e){n.handleInputChange(e)}})},n.getSuggestionItemProps=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.handleSuggestionMouseEnter.bind(n,e.index),r=n.handleSuggestionClick.bind(n,e);return o({},t,{key:e.id,id:n.getActiveSuggestionId(),role:"option",onMouseEnter:(0,l.compose)(a,t.onMouseEnter),onMouseLeave:(0,l.compose)(n.handleSuggestionMouseLeave,t.onMouseLeave),onMouseDown:(0,l.compose)(n.handleSuggestionMouseDown,t.onMouseDown),onMouseUp:(0,l.compose)(n.handleSuggestionMouseUp,t.onMouseUp),onTouchStart:(0,l.compose)(n.handleSuggestionTouchStart,t.onTouchStart),onTouchEnd:(0,l.compose)(n.handleSuggestionMouseUp,t.onTouchEnd),onClick:(0,l.compose)(r,t.onClick)})},n.handleSuggestionMouseEnter=function(e){n.setActiveAtIndex(e)},n.handleSuggestionMouseLeave=function(){n.mousedownOnSuggestion=!1,n.clearActive()},n.handleSuggestionMouseDown=function(e){e.preventDefault(),n.mousedownOnSuggestion=!0},n.handleSuggestionTouchStart=function(){n.mousedownOnSuggestion=!0},n.handleSuggestionMouseUp=function(){n.mousedownOnSuggestion=!1},n.handleSuggestionClick=function(e,t){t&&t.preventDefault&&t.preventDefault();var o=e.description,a=e.placeId;n.handleSelect(o,a),setTimeout((function(){n.mousedownOnSuggestion=!1}))},n.state={loading:!1,suggestions:[],userInputValue:e.value,ready:!e.googleCallbackName},n.debouncedFetchPredictions=(0,s.default)(n.fetchPredictions,n.props.debounce),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props.googleCallbackName;e?window.google?this.init():window[e]=this.init:this.init()}},{key:"componentWillUnmount",value:function(){var e=this.props.googleCallbackName;e&&window[e]&&delete window[e]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),t}(r.default.Component);u.propTypes={onChange:i.default.func.isRequired,value:i.default.string.isRequired,children:i.default.func.isRequired,onError:i.default.func,onSelect:i.default.func,searchOptions:i.default.shape({bounds:i.default.object,componentRestrictions:i.default.object,location:i.default.object,offset:i.default.oneOfType([i.default.number,i.default.string]),radius:i.default.oneOfType([i.default.number,i.default.string]),types:i.default.array}),debounce:i.default.number,highlightFirstSuggestion:i.default.bool,shouldFetchSuggestions:i.default.bool,googleCallbackName:i.default.string},u.defaultProps={onError:function(e,t){return console.error("[react-places-autocomplete]: error happened when fetching data from Google Maps API.\nPlease check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)\nStatus: ",e)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0},t.default=u},424:function(e,t,n){(function(t){var n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,r=/^0o[0-7]+$/i,i=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,c=s||l||Function("return this")(),u=Object.prototype.toString,d=Math.max,m=Math.min,g=function(){return c.Date.now()};function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function p(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(f(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=f(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=a.test(e);return s||r.test(e)?i(e.slice(2),s?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,n){var o,a,r,i,s,l,c=0,u=!1,h=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=o,r=a;return o=a=void 0,c=t,i=e.apply(r,n)}function b(e){return c=e,s=setTimeout(E,t),u?y(e):i}function S(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=r}function E(){var e=g();if(S(e))return _(e);s=setTimeout(E,function(e){var n=t-(e-l);return h?m(n,r-(e-c)):n}(e))}function _(e){return s=void 0,v&&o?y(e):(o=a=void 0,i)}function O(){var e=g(),n=S(e);if(o=arguments,a=this,l=e,n){if(void 0===s)return b(l);if(h)return s=setTimeout(E,t),y(l)}return void 0===s&&(s=setTimeout(E,t)),i}return t=p(t)||0,f(n)&&(u=!!n.leading,r=(h="maxWait"in n)?d(p(n.maxWait)||0,t):r,v="trailing"in n?!!n.trailing:v),O.cancel=function(){void 0!==s&&clearTimeout(s),c=0,o=l=a=s=void 0},O.flush=function(){return void 0===s?i:_(g())},O}}).call(this,n(10))},425:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.compose=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];t.forEach((function(e){return e&&e.apply(void 0,n)}))}},t.pick=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}},426:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.geocodeByAddress=function(e){var t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise((function(o,a){t.geocode({address:e},(function(e,t){t!==n&&a(t),o(e)}))}))},t.getLatLng=function(e){return new Promise((function(t,n){try{t({lat:e.geometry.location.lat(),lng:e.geometry.location.lng()})}catch(o){n(o)}}))},t.geocodeByPlaceId=function(e){var t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise((function(o,a){t.geocode({placeId:e},(function(e,t){t!==n&&a(t),o(e)}))}))}},427:function(e,t,n){}}]);
//# sourceMappingURL=17.c2811dca.chunk.js.map